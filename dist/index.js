(()=>{var e={222:(e,t,r)=>{r(611);const n=r(896),a=r(3);e.exports=(e,t)=>{const{filename:r="TERI MERI LADAYI (Full Song) Maninder Buttar feat. Tania _ Akasa _ Arvindr Khaira _ MixSingh _Jugni(240P).mp4"}=e.query,s=a.join("videos",r),l=n.statSync(s).size,i=e.query.range||e.headers.range;if(console.log("filename",e.query.filename,"range...",i),i){const e=i.replace(/bytes=/,"").split("-"),r=parseInt(e[0],10),a=e[1]?parseInt(e[1],10):l-1;console.log("hit in range",e,r,a);const o=a-r+1,c=n.createReadStream(s,{start:r,end:a}),m={"Content-Range":`bytes ${r}-${a}/${l}`,"Accept-Ranges":"bytes","Content-Length":o,"Content-Type":"video/mp4"};t.writeHead(206,m),c.pipe(t)}else{console.log("hit in else");const e={"Content-Length":l,"Content-Type":"video/mp4"};t.writeHead(200,e),n.createReadStream(s).pipe(t)}}},3:e=>{"use strict";e.exports=require("path")},896:e=>{"use strict";e.exports=require("fs")},611:e=>{"use strict";e.exports=require("http")}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=require("express");var t=r.n(e);const n=require("react");var a=r.n(n);const s=require("react-dom/server"),l=e=>{let{files:t,queryParams:r}=e;const[s,l]=(0,n.useState)(`/stream?filename=${r?.filename||t?.[0]}`),[i,o]=(0,n.useState)(0);return console.log(s,"ffff..."),a().createElement(a().Fragment,null,a().createElement("div",{className:"bg-slate-600 w-auto max-h-[450px]"},a().createElement("video",{className:"w-full max-h-[450px]",controls:!0,src:`${s}`})),a().createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 m-4"},(t||[])?.map(((e,t)=>a().createElement("div",{key:t,onClick:()=>{const t=new URL(window.location.href);t.searchParams.set("filename",e),window.history.pushState({},"",t.toString()),l(`/stream?filename=${e}`)},style:{cursor:"pointer"},className:"cursor-pointer border rounded shadow hover:shadow-lg transition-shadow bg-white"},a().createElement("div",{className:"flex items-center justify-center h-32 bg-gray-200"},a().createElement("img",{src:e.url,alt:e.name,className:"w-full h-32 object-cover"}),a().createElement("p",{className:"text-sm text-gray-600"},e)))))))},i=()=>{const[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(null);return a().createElement("div",{className:"min-h-screen bg-gray-100 p-6"},a().createElement("h1",{className:"text-3xl font-bold mb-4 text-center"},"Media Explorer"),a().createElement("div",{className:"flex justify-center mb-4"},a().createElement("button",{onClick:async()=>{try{const e=await window.showDirectoryPicker(),r=[];for await(const[t,n]of e)if("file"===n.kind){const e=await n.getFile(),a=URL.createObjectURL(e);r.push({name:t,url:a,type:e.type})}t(r)}catch(e){console.error("Error selecting folder:",e)}},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"},"Select Folder")),e.length>0&&a().createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"},e.map(((e,t)=>a().createElement("div",{key:t,onClick:()=>s(e),className:"cursor-pointer border rounded shadow hover:shadow-lg transition-shadow bg-white"},e.type.startsWith("image")?a().createElement("img",{src:e.url,alt:e.name,className:"w-full h-32 object-cover"}):a().createElement("div",{className:"flex items-center justify-center h-32 bg-gray-200"},a().createElement("p",{className:"text-sm text-gray-600"},e.name)))))),r&&a().createElement("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50"},a().createElement("div",{className:"relative bg-white p-4 rounded-lg"},a().createElement("button",{onClick:()=>s(null),className:"absolute top-2 right-2 text-gray-600 hover:text-gray-800"},"âœ–"),r.type.startsWith("video")&&a().createElement("video",{src:r.url,controls:!0,autoPlay:!0,className:"w-full"}),r.type.startsWith("audio")&&a().createElement("audio",{src:r.url,controls:!0,autoPlay:!0,className:"w-full"}),r.type.startsWith("image")&&a().createElement("img",{src:r.url,alt:r.name,className:"w-full"}))))};function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(null,arguments)}const c=e=>{let{files:t=[],name:r,...n}=e;return console.log(t,"ppp"),a().createElement(a().Fragment,null,a().createElement("div",null,a().createElement("h1",null,"Hello, React SSR!"),a().createElement(l,o({files:t||[]},n)),a().createElement("p",null,"This is a server-rendered React app. ",t[0]),a().createElement("button",{onClick:()=>{console.log("click...me"),alert("click")}},"click ",r),a().createElement(i,null)))},m=require("cors");var d=r.n(m);const u=r(222),g=r(896),p=r(3),h=t()();h.use(t().urlencoded({extended:!0})),h.use(t().static(p.join(__dirname,"web-build"))),h.use(d()());const f=p.join("./","videos");let y;try{y=g.readdirSync(f),console.log("Files in the folder:",y[0])}catch(e){console.error("Error reading directory:",e)}h.get("/",((e,t)=>t.status(200).send("This is base {/index} API. Use the respective routing-API to begin..."))),h.get("/web*",((e,t)=>{const r=new URL(e.protocol+"://"+e.get("host")+e.originalUrl).searchParams,n=`\n        <!DOCTYPE html>\n        <html lang="en">\n        <head>\n            <meta charset="UTF-8">\n            <meta name="viewport" content="width=device-width, initial-scale=1.0">\n            <title>React SSR</title>\n        </head>\n        <body>\n            <div id="root">${(0,s.renderToString)(a().createElement(c,{files:y,name:"vikas",queryParams:Object.fromEntries(r.entries())}))}</div>\n             <script>\n                window.__FILES__ = ${JSON.stringify(y)};\n                window._query_ = ${JSON.stringify(Object.fromEntries(r.entries()))};\n            <\/script>\n            <script src="/bundled-client.js" defer><\/script>\n        </body>\n        </html>\n    `;t.send(n)})),h.use("/stream",u),h.listen(3e3,(()=>{console.log("Server is running on http://localhost:3000")}))})()})();